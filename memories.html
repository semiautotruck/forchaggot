<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Our Memories — Stanford</title>
  <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;1,400&family=DM+Mono:wght@300;400&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --cream: #faf6f0;
      --gold: #c9a96e;
      --rust: #b5704a;
      --sage: #8a9e8c;
      --slate: #5a6670;
      --ink: #2d2a26;
      --warm: #f2e8d9;
    }

    body {
      min-height: 100vh;
      background-color: var(--cream);
      background-image: radial-gradient(ellipse 80% 60% at 20% 10%, rgba(201,169,110,0.1) 0%, transparent 60%);
      font-family: 'Lora', Georgia, serif;
      color: var(--ink);
    }

    /* ── HEADER ── */
    header {
      text-align: center;
      padding: 60px 24px 30px;
      position: relative;
    }
    .back {
      position: absolute; top: 28px; left: 24px;
      font-family: 'DM Mono', monospace;
      font-size: 11px;
      color: var(--slate);
      text-decoration: none;
      letter-spacing: 0.1em;
      opacity: 0.6;
      transition: opacity 0.2s;
    }
    .back:hover { opacity: 1; }
    header .tag {
      font-family: 'DM Mono', monospace;
      font-size: 11px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 16px;
      opacity: 0;
      animation: fadeUp 0.8s ease 0.2s forwards;
    }
    header h1 {
      font-size: clamp(2rem, 5vw, 3rem);
      font-weight: 400;
      opacity: 0;
      animation: fadeUp 0.8s ease 0.4s forwards;
    }
    header h1 em { font-style: italic; color: var(--rust); }
    header .sub {
      font-family: 'DM Mono', monospace;
      font-size: 12px;
      color: var(--slate);
      margin-top: 10px;
      opacity: 0;
      animation: fadeUp 0.8s ease 0.6s forwards;
    }

    /* ── PIXEL ART SCENE ── */
    .pixel-scene-wrapper {
      max-width: 900px;
      margin: 10px auto 10px;
      padding: 0 24px;
      opacity: 0;
      animation: fadeUp 0.8s ease 0.75s forwards;
    }
    .pixel-scene-label {
      font-family: 'DM Mono', monospace;
      font-size: 10px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--gold);
      text-align: center;
      margin-bottom: 10px;
    }
    .pixel-scene {
      background: #2c1810;
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid rgba(201,169,110,0.25);
      box-shadow: 0 8px 34px rgba(0,0,0,0.08);
    }
    canvas#pixelCanvas {
      width: 100%;
      height: 220px; /* adjust height if you want */
      image-rendering: pixelated;
      display: block;
    }
    .pixel-caption {
      text-align: center;
      font-family: 'DM Mono', monospace;
      font-size: 11px;
      color: var(--slate);
      margin-top: 10px;
      font-style: italic;
      opacity: 0.85;
    }

    /* ── GRID ── */
    .section-label {
      font-family: 'DM Mono', monospace;
      font-size: 11px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--gold);
      text-align: center;
      margin: 26px 0 18px;
      opacity: 0;
      animation: fadeUp 0.8s ease 0.9s forwards;
    }

    .gallery-wrap {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 24px 60px;
      opacity: 0;
      animation: fadeUp 0.8s ease 1.0s forwards;
    }

    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 14px;
    }

    .tile {
      position: relative;
      border-radius: 10px;
      overflow: hidden;
      background: white;
      border: 1px solid rgba(201,169,110,0.15);
      box-shadow: 0 4px 18px rgba(0,0,0,0.06);
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      aspect-ratio: 1 / 1;
    }
    .tile:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 26px rgba(0,0,0,0.10);
    }

    .tile img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transform: scale(1.02);
    }

    .tile.missing {
      background: linear-gradient(135deg, rgba(201,169,110,0.12), rgba(122,155,181,0.10));
    }
    .tile.missing img { opacity: 0.12; filter: grayscale(1); }

    .tile .badge {
      position: absolute;
      left: 10px;
      bottom: 10px;
      font-family: 'DM Mono', monospace;
      font-size: 10px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: rgba(250,246,240,0.9);
      background: rgba(45,42,38,0.55);
      padding: 5px 8px;
      border-radius: 999px;
      backdrop-filter: blur(6px);
    } /* ✅ IMPORTANT: this closing brace was missing in your file */

    /* ── MODAL ── */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.55);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 24px;
      z-index: 999;
    }
    .modal.open { display: flex; }

    .modal-card {
      width: min(980px, 100%);
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 18px 60px rgba(0,0,0,0.35);
      border: 1px solid rgba(201,169,110,0.25);
      position: relative;
    }

    .modal-topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 16px;
      border-bottom: 1px solid rgba(201,169,110,0.22);
      background: linear-gradient(180deg, rgba(250,246,240,0.9), rgba(255,255,255,0.9));
    }
    .modal-title {
      font-family: 'DM Mono', monospace;
      font-size: 11px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--slate);
    }
    .modal-actions {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    .icon-btn {
      border: 1px solid rgba(90,102,112,0.25);
      background: white;
      color: var(--ink);
      border-radius: 999px;
      padding: 8px 10px;
      font-family: 'DM Mono', monospace;
      font-size: 11px;
      cursor: pointer;
      transition: transform 0.15s ease, border-color 0.15s ease;
    }
    .icon-btn:hover {
      transform: translateY(-1px);
      border-color: rgba(201,169,110,0.7);
    }

    .modal-body {
      display: grid;
      grid-template-columns: 1.2fr 0.8fr;
      gap: 0;
    }

    .modal-photo {
      background: #111;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .modal-photo img {
      width: 100%;
      height: 100%;
      max-height: 70vh;
      object-fit: contain;
      display: block;
    }

    .modal-note {
      padding: 18px 18px 22px;
      background: radial-gradient(ellipse 120% 100% at 20% 10%, rgba(201,169,110,0.10) 0%, transparent 55%);
    }
    .note-label {
      font-family: 'DM Mono', monospace;
      font-size: 10px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 10px;
    }
    .note-text {
      font-size: 14px;
      line-height: 1.75;
      color: var(--slate);
      white-space: pre-wrap;
    }

    @media (max-width: 860px) {
      .modal-body { grid-template-columns: 1fr; }
      .modal-photo img { max-height: 60vh; }
    }

    footer {
      text-align: center;
      padding: 18px 24px 60px;
      font-family: 'DM Mono', monospace;
      font-size: 11px;
      color: var(--slate);
      opacity: 0.6;
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(14px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>

<body>

  <header>
    <a class="back" href="index.html">← back</a>
    <p class="tag">Stanford Memory Collage</p>
    <h1>Us, <em>so far.</em></h1>
    <p class="sub">click any photo when you miss us.</p>
  </header>

  <!-- PIXEL ART WALKING SCENE -->
  <div class="pixel-scene-wrapper">
    <p class="pixel-scene-label">✦ us on palm drive ✦</p>
    <div class="pixel-scene">
      <canvas id="pixelCanvas" width="350" height="100"></canvas>
    </div>
    <p class="pixel-caption">somewhere between class and the rest of it... this is us</p>
  </div>

  <p class="section-label">✦ the whole collage ✦</p>

  <div class="gallery-wrap">
    <div class="gallery-grid" id="galleryGrid"></div>
  </div>

  <footer>built with love · for when you need it</footer>

  <!-- MODAL -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true">
      <div class="modal-topbar">
        <div class="modal-title" id="modalTitle">Memory</div>
        <div class="modal-actions">
          <button class="icon-btn" id="prevBtn">← Prev</button>
          <button class="icon-btn" id="nextBtn">Next →</button>
          <button class="icon-btn" id="closeBtn">Close ✕</button>
        </div>
      </div>

      <div class="modal-body">
        <div class="modal-photo">
          <img id="modalImg" alt="Memory photo" />
        </div>
        <div class="modal-note">
          <div class="note-label">note from me</div>
          <div class="note-text" id="modalNote">No note yet.</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ====== CONFIG ======
    const IMAGE_DIR = "img";
    const START = 1;
    const END = 73;

    // Because your folder contains a mix of .jpg, .jpeg, .png:
    const EXTENSIONS = ["jpg", "jpeg", "png"];

    // ====== NOTES ======
    // (I cleaned a couple lines to remove self-harm + slur references. Edit freely if you want different phrasing.)
    const notes = {
      1: "Halloween with Carrot and Jason the Ween. They look so unbelievably stupid",
      2: "We went to the library 2 times the entire quarter. We got, you guessed it, no work done. And we were studying for Math 21. At least I had you there, because I genuinely would have lost my mind otherwise.",
      3: "David. I literally get mad every time I see him",
      4: "Thank you so much for this",
      5: "I saw this on a solo trip to the De Young Museum. You were sleeping, of course. This painting was lowkey mid, but I still liked it because of how crisp the colors were. Lowkey reminded me of us.",
      6: "Quarter 1 Neal impression",
      7: "Pretty accurate, no?",
      8: "Asian Art museum. Korea got mogged by every other country",
      9: "Carrot",
      10: "This genuinely made me scream",
      11: "Tressider",
      12: "...",
      13: "Hikari (I still don't understand a single thing she was saying)",
      14: "Pre-loft bed",
      15: "I love the sun at Stanford. Bike ride in fall was so nice. Took this first couple of weeks at Stanford before things went down",
      16: "I genuinely could not stop laughing at Tamil",
      17: "I miss my hair bro",
      18: "We were walking around the pier at night and we stopped by the Ghirardelli store. We wasted money on hot chocolate, but it was so worth it",
      19: "The worst class I have ever taken in my entire life",
      20: "Maria",
      21: "Who the hell is Thomas",
      22: "Holy shit it's Ishaan",
      23: "Thanks again for this",
      24: "I literally look like Lord Farquaad",
      25: "I wonder if we are still single by the end of sophomore year. Just get with Trin at this point",
      26: "No words needed",
      27: "We were walking around downtown Palo Alto when we saw this adorable cat at the local cat cafe. He reminded me of my cats back at home.",
      28: "These magnets are still on my fridge btw",
      29: "1 of 2 times we went the gym. I don't know what I was doing but I ended up with all these bruises. And genuinely for what",
      30: "Can you believe these are our friends",
      31: "One of the views I showed you sandwiched between the Financial District and Chinatown. We were on the rooftop. You were the first friend I brought up here.",
      32: "We were at Kinokuniya bookstore in Japantown. We sat on the floor while I tutored. Then you had to call our COLLEGE 102 classmates.",
      33: "Hollow carrot",
      34: "We were on that rooftop in downtown SF. Watching workers wrap up their shifts. I hope we don't end up corporate slaves",
      35: "Dustin's cat. That COLLEGE 102 dinner was genuinely unforgettable.",
      36: "Quarter 2 Valentine's day. We were so lonely we got each other presents. Also our first major argument (Super Idol).",
      37: "It's David again",
      38: "My car's battery was on life support. I had to jump start it 4 times that day. I got stranded in the Chipotle parking lot. Horrible day.",
      39: "Our first adventure to In-N-Out. It was your first time at one ever.",
      40: "Korean food post-tutor session (Redwood City I think)",
      41: "Our favorite teacher!!!!",
      42: "Andrew Bell's Zoom class. I literally could not stop laughing",
      43: "Our matching beanies. They are pretty cute honestly",
      44: "No words needed again",
      45: "Your sausage eyes",
      46: "Rinc diversity",
      47: "NSO was truly a time. Sage bruh holy",
      48: "My call logs are literally just populated by you",
      49: "I think this was NSO too. We were fat and only went for the food",
      50: "I'm literally a boyfriend and I'm not even trans",
      51: "What the hell why do I look like that",
      52: "Okay now why do YOU look like that",
      53: "Our Halloween costumes. First party was sweaty and loud. Never again.",
      54: "Armed Conflict fine shit",
      55: "Coit Tower + Filbert steps. The skyline was gorgeous. The mansions were insane.",
      56: "We went to the pier at night after Ghirardelli",
      57: "Half Moon Bay at night. The waves were calming. And you got pissed off which was amazing",
      58: "Our friends",
      59: "Our first Dave's run...",
      60: "Stanford palms. I genuinely thought I was dreaming driving down Palm Drive the first time",
      61: "Wallenberg basement on a rainy day. I love petrichor. I hate biking through wetness",
      62: "City Lights bookstore in Chinatown. You were scrolling the entire time",
      63: "Resident Evil meal from Arrillaga",
      64: "Leaving Armed Conflict class",
      65: "Stress-Free Auto Care lied to me and overcharged me. One of my worst days that quarter.",
      66: "Your teepee",
      67: "We took a picture to send to our parents because they were worried about us",
      68: "Our favorite teacher. Part 2",
      69: "Stanford at sunset. One of the prettiest days on campus",
      70: "I miss when I actually had hair",
      71: "Thank you Raymond for providing us with the least helpful information known to man",
      72: "I don't even know what to say",
      73: "Your second time doing my makeup"
    };

    // ====== HELPERS ======
    function urlFor(n, ext) {
      return `${IMAGE_DIR}/${n}.${ext}`;
    }

    // Tries jpg -> jpeg -> png until one loads
    function setImgWithFallback(imgEl, n, onMissing) {
      let idx = 0;

      function tryNext() {
        if (idx >= EXTENSIONS.length) {
          if (typeof onMissing === "function") onMissing();
          return;
        }
        imgEl.src = urlFor(n, EXTENSIONS[idx++]);
      }

      imgEl.onerror = tryNext;
      tryNext();
    }

    // ====== BUILD GRID ======
    const grid = document.getElementById("galleryGrid");

    for (let i = START; i <= END; i++) {
      const tile = document.createElement("div");
      tile.className = "tile";

      const img = document.createElement("img");
      img.alt = `Memory ${i}`;
      img.loading = "lazy";

      setImgWithFallback(img, i, () => {
        tile.classList.add("missing");
      });

      const badge = document.createElement("div");
      badge.className = "badge";
      badge.textContent = `#${i}`;

      tile.appendChild(img);
      tile.appendChild(badge);

      tile.addEventListener("click", () => openModal(i));
      grid.appendChild(tile);
    }

    // ====== MODAL LOGIC ======
    const modal = document.getElementById("modal");
    const modalImg = document.getElementById("modalImg");
    const modalTitle = document.getElementById("modalTitle");
    const modalNote = document.getElementById("modalNote");
    const closeBtn = document.getElementById("closeBtn");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");

    let current = START;

    function setModal(n) {
      current = n;
      modalTitle.textContent = `Memory #${n}`;
      modalNote.textContent = notes[n] || "No note yet.";

      modalImg.style.opacity = "1";
      setImgWithFallback(modalImg, n, () => {
        modalImg.style.opacity = "0.15";
        modalImg.alt = `Missing image: ${n}`;
      });
    }

    function openModal(n) {
      setModal(n);
      modal.classList.add("open");
      modal.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";
    }

    function closeModal() {
      modal.classList.remove("open");
      modal.setAttribute("aria-hidden", "true");
      document.body.style.overflow = "";
    }

    function prev() {
      const n = current <= START ? END : current - 1;
      setModal(n);
    }

    function next() {
      const n = current >= END ? START : current + 1;
      setModal(n);
    }

    closeBtn.addEventListener("click", closeModal);
    prevBtn.addEventListener("click", prev);
    nextBtn.addEventListener("click", next);

    modal.addEventListener("click", (e) => {
      if (e.target === modal) closeModal();
    });

    window.addEventListener("keydown", (e) => {
      if (!modal.classList.contains("open")) return;
      if (e.key === "Escape") closeModal();
      if (e.key === "ArrowLeft") prev();
      if (e.key === "ArrowRight") next();
    });

    // ====== PIXEL ART WALKING SCENE ======
    (function startPixelScene() {
      const canvas = document.getElementById('pixelCanvas');
      if (!canvas) return;

      const ctx = canvas.getContext('2d');
      const W = canvas.width, H = canvas.height;
      const S = 2;

      const GROUND= '#8B7355';
      const GRASS = '#6B8E5A';
      const PATH  = '#D2B48C';
      const TREE_T= '#2d5a1b';
      const TREE_D= '#1a3a10';
      const TREE_B= '#4a3728';
      const P1_SHIRT = '#8B0000';
      const P1_PANTS = '#2d3748';
      const P1_SKIN  = '#FDBCB4';
      const P1_HAIR  = '#2c1810';
      const P2_SHIRT = '#1a4a7a';
      const P2_PANTS = '#4a3020';
      const P2_SKIN  = '#FDBCB4';
      const P2_HAIR  = '#1a1208';
      const SUN    = '#FFD700';
      const CLOUD  = '#f0f0f0';
      const LAMP_POST = '#5a4a3a';
      const LAMP_LIGHT = '#fff8dc';

      function px(x, y, color, w=1, h=1) {
        ctx.fillStyle = color;
        ctx.fillRect(x*S, y*S, w*S, h*S);
      }

      function drawTree(x, y) {
        if (x < -10 || x > W+10) return;
        px(x, y+10, TREE_B, 2, 8);
        px(x-4, y+2, TREE_D, 10, 4);
        px(x-3, y,   TREE_T, 8, 4);
        px(x-2, y-2, TREE_T, 6, 3);
        px(x-6, y+1, TREE_T, 4, 2);
        px(x+4, y+1, TREE_T, 4, 2);
        px(x-5, y-1, TREE_D, 3, 2);
        px(x+4, y-1, TREE_D, 3, 2);
      }

      function drawLamp(x) {
        if (x < -5 || x > W+5) return;
        px(x, 44, LAMP_POST, 2, 20);
        px(x-2, 42, LAMP_POST, 6, 2);
        ctx.globalAlpha = 0.4;
        px(x-1, 40, LAMP_LIGHT, 4, 4);
        ctx.globalAlpha = 1;
      }

      function drawPerson(x, y, walk, shirt, pants, skin, hair) {
        const legSwing = [0,1,0,-1][walk];
        px(x, y, skin, 4, 4);
        px(x, y-1, hair, 4, 2);
        px(x-1, y, hair, 1, 2);
        px(x+4, y, hair, 1, 2);

        px(x-1, y+4, shirt, 6, 5);
        px(x-2, y+4+legSwing, shirt, 2, 4);
        px(x+5, y+4-legSwing, shirt, 2, 4);

        px(x,   y+9, pants, 2, 4+legSwing);
        px(x+2, y+9, pants, 2, 4-legSwing);

        px(x-1, y+13+legSwing, '#222', 3, 2);
        px(x+2, y+13-legSwing, '#222', 3, 2);
      }

      function drawScene(frame) {
        ctx.clearRect(0, 0, W*S, H*S);

        const grad = ctx.createLinearGradient(0, 0, 0, H*S*0.6);
        grad.addColorStop(0, '#87CEEB');
        grad.addColorStop(1, '#ffd699');
        ctx.fillStyle = grad;
        ctx.fillRect(0, 0, W*S, H*S*0.6);

        px(W-20, 5, SUN, 5, 5);
        ctx.globalAlpha = 0.3;
        px(W-22, 3, SUN, 9, 9);
        ctx.globalAlpha = 1;

        const cx = (frame * 0.3) % (W + 40) - 20;
        px(cx, 8, CLOUD, 12, 3);
        px(cx+3, 6, CLOUD, 8, 3);
        px(cx+30, 12, CLOUD, 9, 3);
        px(cx+33, 10, CLOUD, 6, 2);

        px(0, 62, GROUND, W, 8);
        px(0, 60, GRASS, W, 4);
        px(0, 68, GRASS, W, 2);

        px(10, 62, PATH, W-20, 8);

        const treeX = -(frame * 0.8) % (W + 60);
        drawTree(treeX + W + 10, 30);
        drawTree(treeX + W + 60, 28);
        drawTree(treeX + W + 110, 32);
        drawTree(treeX + 10, 30);
        drawTree(treeX + 60, 28);
        drawTree(treeX + 110, 32);

        const lampX = (-(frame * 1.0) % (W + 20) + W + 20);
        drawLamp(lampX);
        drawLamp(lampX - 80);
        drawLamp(lampX - 160);

        const walk = Math.floor(frame / 8) % 4;
        drawPerson(70, 48, walk, P1_SHIRT, P1_PANTS, P1_SKIN, P1_HAIR);
        drawPerson(60, 48, walk, P2_SHIRT, P2_PANTS, P2_SKIN, P2_HAIR);

        ctx.globalAlpha = 0.15;
        px(58, 63, '#000', 18, 2);
        ctx.globalAlpha = 1;
      }

      let frame = 0;
      function animate() {
        frame++;
        drawScene(frame);
        requestAnimationFrame(animate);
      }
      animate();
    })();
  </script>
</body>
</html>
